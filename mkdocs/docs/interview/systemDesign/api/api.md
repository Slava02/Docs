# API

https://habr.com/ru/companies/yandex/articles/583332/

## REST

https://systems.education/what-is-rest

Глагол - метод запроса (GET, POST, DELETE, PUT)

Существительное - URI запроса

Дополнительная информация - хедеры запроса

Содержимое - тело запроса и ответа в Json

Результат - код ответа

## RPC

https://habr.com/ru/articles/823049/

Класс технологий, позволяющих программам вызывать функции или процедуры в другом адресном пространстве

## GraphQL

https://habr.com/ru/articles/765064/

В классическом REST API, чтобы получить такие данные, пришлось бы сделать несколько запросов к серверу: один запрос к эндпойнту пользователей для получения списка пользователей и запрос к энпойнту постов, у которого мы запросим посты для всех найденных пользователей (либо вообще по одному запросу на каджого нужного пользователя — но это реже). С использованием GraphQL эта проблема может быть решена более эффективно. Можно запросить список пользователей и, одновременно, указать, что для каждого пользователя нужно получить последние посты.

## Как получать обновления от сервера

### Polling

![img.png](img.png)

### Long Polling

![img_1.png](img_1.png)

### WebHook

![img_2.png](img_2.png)

### Streaming

![img_3.png](img_3.png)

### SSE

![img_4.png](img_4.png)

### WebSocket

![img_5.png](img_5.png)

## Пагинация

Когда нужно отдавать много данных - необходимо отдавать их по частям, для этого можно использовать:

- offset и limit
- page
- cursor (https://postgrespro.ru/docs/postgrespro/9.6/plpgsql-cursors)

## Производительность

- Запросы и ответы можно сжимать
- Можно сохранять запрашиваемые данные в кеше у клиента

## Идемпотентность API

https://habr.com/ru/companies/yandex/articles/442762/

Представим, что мы разрабатываем банковское ПО и хотим предотвратить случаи, когда запрос отсылается, выполняется, но ответ не доходит, после чего - клиент повторно его отправляет и оно выполняется второй раз.

Для этого - на стороне клиента генерируем ключ и отправляем его сервису через API. Сервис у себя проверит, выполнял ли он уже эту операцию по ключу или нет.


